// ドキュメントの整形
文書には内容と体裁があります。体裁とは、書体やページレイアウトなど文書の仕上りを規定する概念です。同じ内容の文書でも、その体裁が異なれば与える印象は全く異なります。伝わる文書を書くためには、はっきりとした内容があることはもちろん、体裁も重要です。

// 以下はあくまで AsciiDoctor PDF に対するスタイル調整について記述。 AciiDoctor で HTML を出力する際には、CSS を利用します。

AsciiDoctorはデフォルト体裁を持っています。デフォルトの体裁は、ほとんどの場合に適当です。しかしTPOによっては不適当であったり、または単に好みと合わなかったり、などの理由で変更したいことがあります。そのような場合、AsciiDoctorに体裁の仕様を指示することで、思い通りの仕上がりにできます。

体裁には多くの設定項目があります。たとえば文書のサイズ（A4、USレターなど）やフォントからはじまり、フッターの大きさなどは体裁の設定項目の一部となります。

AsciiDoctorでは各体裁はスタイルと呼ばれ、文書本体とは独立したスタイルファイルに保存されます。以下、スタイルファイルを見ていきましょう。

********************************
コラム: 体裁の指定方法

一般的に、体裁の設定方法はアプリケーションによって二種類に分かれます。一つは文書内で体裁を指示するものです。もう一つは文書と体裁の設定を別々に行うものです。

文書内で体裁を指示するアプリケーションに、Microsoft Wordがあります。このような文書作成ツールでは、体裁を文書中に一つづつ指示する必要があります。体裁指示のたびに即時反映されることから、編集者が最終成果物の状態を把握しやすいという利点があります。一方で、体裁指定を統一しにくいという欠点が存在します。編集者が表や画像などの部品を文書に追加するたびに、体裁も設定しないといけないため、設定にバラつきや誤りが含まれやすいのです。

文書と体裁の設定を別々に行うアプリケーションに、AsciiDoctorやSphinxがあります。体裁を文書本体と独立させておくことで、本文に手を入れることなく体裁だけを独立して調整できます。このようなシステムの欠点に、実際の仕上がりがすぐに把握できないという点があります。なぜなら本文と体裁が分離しているので、体裁を適用するまでどのような仕上りになるのか見ることができないのです。

一方、文書と体裁の設定を別々に行うと、本文を簡潔に保てるという利点があります。本文が簡潔に保たれていることで、文書内容へ自然と注意が向くようになります。さらに、文書と体裁の設定を別々に行うシステムでは、本文の編集は環境を選ばず、使いなれたエディタやツールがそのまま使えます。製品マニュアルや書籍の執筆など、体裁の一貫性が重要視される場面では、体裁は本文と分離して管理されることが少なくありません。
********************************

==== スタイルファイル
スタイルファイルは多くの設定項目を含みます。設定項目は、大きくいくつかの部（ブロック）に分けられます。文書のスタイリングという観点では、書体指定・体裁指定・表紙の指定・柱の指定ブロックが重要です。本節ではこれらのブロックについて解説します。

スタイルファイルは複雑です。そのため解説にあたって、実例があると分かりやすいです。以下、筆者が本書のために作成したスタイルファイル（Kindle風サンプル）を例として使用します。例の完全版を https://github.com/continuous-manual-writing/style-sample[本書サンプルリポジトリ] に収録しました。AsciiDoctor PDF 1.5.0.alpha.9 以降で実際に使用できます。試してみてください。

********************************
コラム: ここにもYAML形式

スタイルファイルはYAML形式です。YAML形式は、Travisの設定ファイルでも採用されています。
********************************

[id="sec-style-yaml-blocks"]
==== 設定項目の階層構造

// TBD: 階層的な名前について不明瞭。
各節の解説に入る前に、設定項目の書式について解説します。設定項目には全て、階層的な名前がついています。階層的な名前とは、大ブロック名→小ブロック名→...→項目名が全てアンダーバー ```_``` で繋げられて記述されている名前です。階層構造を設定項目名に含めることによって、各項目が持つ役割が把握しやすくなっています。

たとえば基本文字サイズを規定する設定項目に「base_font_size_large」（後述）がありますが、これは「base」→「font」→「size」→「large」という構造であることが分かります。以下基本文字サイズの設定例となります。

[source, yaml]
----
base_font_size_small: 8
base_font_size_large: 14
----

// 「接頭辞」とは。
同一の階層に属す設定項目を複数記述する際、階層名＋「:」と書いて一旦行を打ち切ることで、以後字下げされている範囲において階層名を省略できます。

さきほどの基本（base）文字サイズの規定例を見ましょう。baseブロックを作って字下げすることで、次のように書けます。

[source, yaml]
----
base:
  font_size_small: 8
  font_size_large: 14
----

baseについてまとまりました。

fontがまだ共通しています。まとめてみましょう。具体的には以下のように記述できます。

[source, yaml]
----
base:
  font:
    size_small: 8
    size_large: 14
----

場合によっては、sizeでさらにまとめたいことがあります。以下sizeでまとめた場合の設定となります。

[source, yaml]
----
base:
  font:
    size:
      small: 8
      large: 14
----

設定項目名は常に階層構造を持つため、字下げで表現された階層はアンダーバーに書きかえられます。たとえば上記の設定は次のようにまとめられます。

[source, yaml]
----
base:
  font_size:
    small: 8
    large: 14
----

********************************
コラム: 設定項目の全貌

https://github.com/asciidoctor/asciidoctor-pdf/blob/master/docs/theming-guide.adoc[AsciiDoctor PDF Theming Guide] では、スタイルファイルの書き方から始まり全設定項目についての解説まで詳細な情報が掲載されています。実際の用例については、AsciiDoctorに同梱されているデフォルトスタイルファイルも役に立ちます。自分でスタイルファイルを書く際にはぜひ参考にしてみてください。
********************************

==== 設定値の展開・演算・組込み関数

スタイルファイルの設定項目について、もう一つ触れておきたいことがあります。それは、設定値も解釈されるということです。AsciiDoctorが解釈することにより、別の設定値を引用（展開）したり、簡単な数式を演算（評価）を行なわせたりすることができます。

設定値を展開するには、＄に続き展開したい設定値名を書きます。

数式の記述には小カッコを含めた四則演算子の他に、組込み関数も使えます。組込み関数とは、主に端数処理を行なうためにAsciiDoctorが持っている関数群で、以下の3つがあります。

[format="csv", options="header"]
|===
関数名, 戻り値
floor(x), xについて小数点以下を切り捨てた値
round(x), xについて小数点以下を四捨五入した値
ceil(x), xについて小数点以下を切り上げた値
|===

以下は例です。第1見出しレベル文字サイズ（heading_h1_font_size）へ、基本文字サイズ（base_font_size）を2.6倍して小数点以下を切り捨てた値を入れています。

[source, yaml]
----
heading:
  h1_font_size: floor($base_font_size * 2.6)
----

お待たせしました。それでは各節の解説に入りましょう。

********************************
コラム: 二重定義や設定項目ミスに注意

同じ設定項目について2度以上指定を重ねると、指定が上書かれます。対応する設定項目が存在しない場合は、単純に無視されます。いずれの場合もエラーや警告が出力されることはありません。ご自身でスタイルを定義される際には、設定項目名を打ち間違えたりしないよう、細心の注意を払うようにしてください。
********************************

==== 書体指定
文書には通常、明朝体やゴシック体などの複数の書体が混在します。書体とは、ある意匠のもとに字体をまとめたものを指します。字体とは、各文字の外観を決定する字形（グリフ）の集合です。字体には標準体、ボールド体、イタリック体、ボールドイタリック体の4つがあります。

標準体とは、何の修飾もされていない字形を持つ字体で、基本となる字体です。ボールド体とは、標準体の各字形を太めに表記した字体です。イタリック体は、標準体の各字形を少し傾けて表記したものです。ボールドイタリック体は、各字形にボールドおよびイタリックの各修飾を同時に施したものです。

ボールド体・イタリック体・ボールドイタリック体の各体とも、見ための際立ちを生かして、重要な概念を強調したり引用したりするために使われます。本書では以下、装飾がない標準体を標準字体、装飾を伴なった各体を派生字体と呼称することにします。

AsciiDoctorでは、書体はフォントファミリとして扱われます。フォントファミリの定義は、基本字体および派生3字体に対して、それぞれフォントファイルを指定することによって行なわれます。

NOTE: フォントファイルには多数の形式がありますが、AsciiDoctorで使うにあたってはTrueTypeフォント（*.ttf, *.ttc）を選んでおくのが良いでしょう。

書体関連の定義は全て、fontブロック以下に書かれます。フォントファミリの定義は、catalogブロックによって行なわれます。フォントファミリの定義は、fontブロックの中で最初に行なわれる設定です。

[source, yaml]
----
font:
  catalog:
    IPA:
      normal: ipaexm.ttf
      bold: ipaexm.ttf
      italic: ipaexm.ttf
      bold_italic: ipaexm.ttf
    ...
----

catalogブロック冒頭の、IPA明朝ファミリの定義です。IPA明朝系TrueType書体4つをまとめて、IPAファミリとして定義しています。ここで、シャープ ```#``` から始まる行はいわゆるコメントで、メモなど好きな内容を書いておけます。この後に、セリフ体としてのNoto Serifファミリ、及びサンセリフ体としてのM+ 1mnファミリの定義が続きます。

ところで定義したフォントファミリに、使いたい文字が含まれていないような場合があります。その場合においても、文字がそのまま欠けてしまったりしては体裁上よくありません。この問題はあらかじめどんな文字も含むフォントファミリを定義しておいて、対応する文字がなかった場合に使うことで解決できます。AsciiDoctorでは、このようなフォントファミリを**フォールバックフォントファミリ**と呼んでいます。

フォールバックフォントファミリは、fallbacksで定義されます。以下はフォールバックフォントファミリとして、IPA明朝ファミリを使用する例です。

[source, yaml]
----
font:
  catalog:
     ...
  fallbacks:
    - IPA
----

先頭にハイフン ```- ``` が付いていることに注意してください。これはリスト形式と呼ばれるものです。リスト形式にすることで、好きなフォントファミリを好きな優先順位で、組み合わせて使用できるようにしています。フォールバックフォントファミリを追加したい場合は、既にあるものにならって、ハイフン ```- ``` を先頭に付けてフォントファミリ名を書き、行頭を揃えて追記してやると良いでしょう。

********************************
コラム: カスタムフォントを使用するには

AsciiDoctorには、いくつかのフォントファイルが標準バンドルされています。自分で用意した書体を使用したい場合には、使いたい書体ごとにフォントファミリを定義します。その後、必要なフォントファイル全てを一箇所に集め、AsciiDoctorへそのパスを-aオプション（後述）で指定します。以下、fonts/以下のフォントファイル群を使用するように指示する例です。

----
$ asciidoctor-pdf -a pdf-style=style.yml -a pdf-fonts-dir=fonts content.adoc
----
********************************

********************************
コラム: フォールバックフォントフォミリで使用できる字体

あるフォントファミリが、フォールバックフォントファミリとして使用される場合、通常字体のみが使用されます。ボールド体・イタリック体・ボールドイタリック体は使用されません。
********************************

==== 体裁指定: ページ設定
AsciiDoctorのスタイルファイルには、ページの体裁を指定するpageブロックがあります。このpageブロックは、背景色・背景画像・向き・マージン・用紙サイズの5つの要素を指定するものです。pageブロックで使用できる設定項目は、以下のものがあります。

 * page_background_color

ページ背景色を指定します。何も指定しない場合は白になります。

 * page_background_image

ページ背景画像のパスを指定します。スタイルファイルからの相対パス、または絶対パスで指定します。

 * page_layout

文書の向きを指定します。縦向きにするにはportrait、横向きにするにはlandscapeと指定します。

 * page_margin

マージンを指定します。左・上・右・下の順に大カッコで括って指定します。指定には単位を付けられます。例えばインチを使用する場合には、○in（インチ）と指定します。単位を省略すると、pt（ポイント）が使用されます。

 * page_size

用紙サイズを指定します。A4など、用紙サイズ名で指定することが一般的です。数値でも指定できます。数値でサイズを指定する場合には、大カッコで括って横・縦と単位付きで指定します。数値に単位を忘れないように注意してください。

以下、pageブロックの設定例となります。pageで字下げしているため、各設定項目ともpage_が省略されていることに注意してください。

[source, yaml]
----
page:
  # ページ背景は白
  background_color: ffffff
  # ページの向きは縦向き
  layout: portrait
  # マージンは左右0.75インチ、上下1インチ
  margin: [0.75in, 1in, 0.75in, 1in]
  # 用紙サイズはA4を使用
  size: A4
----


********************************
コラム: 色指定の方法

文書の体裁にとって、色は欠かせない要素です。コンピュータにおける色の指定は、光の三原色（レッド・グリーン・ブルー）の混合比を記述していく形式が一般的です。AsciiDoctorではRGB形式およびHex形式が該当します。

一方で光の三原色で記述された色は、印刷する場合に調色が難しくなる傾向があります。印刷では色の三原色（シアン・マゼンタ・イエロー）が基準になっているためです。そこで印刷工程が関係するワークフローでは、一般的にCMYK形式と呼ばれる独特な色指定方法が使われています。CMYK形式とは色を、色の三原色にブラック（キー）を加えた4色の混合比で記述する形式です。

AsciiDoctorは、CMYK形式による色指定もサポートしています。

本文の例の場合、以下のように指定することができます。

[format="csv", options="header"]
|===
Hex, RGB, CMYK
"ffffff または #ffffff", "[255,255,255]", "[0, 0, 0, 0] または [0, 0, 0, 0%]"
|===
********************************

==== 体裁指定: 共通書式設定
AsciiDoctorのスタイルファイルには、共通書式指定ブロック（base）があります。共通書式指定ブロックは、主に本文の体裁を指定します。中でも重要な設定項目は、文字揃え・フォント関連（色・ファミリ・サイズ）・行の高さです。共通書式設定ブロックで使える設定項目は、以下のものがあります。

 * base_align

alignは字揃え方法を指定する項目です。次の値のうちのいずれかを取ります。

[format="csv", options="header"]
|===
設定値, 字揃え方法
left, 左
center, 中央
right, 右
justify, 両端
|===

justifyによる両端揃え指定は、半角スペースで語句を区切ることをしない和文ではあまりおすすめできません。

欧文の例では両端揃えを指定しているケースを良く見かけますが、現状のAsciiDoctorによる両端揃えは半角スペースを単語区切りとして、空隙を調整するのみです。禁則処理や行レイアウトの評価は一切行なわれません。そのため半角スペースがあると、どのような文脈で現われたのかを問わず、単語を行の両端に吹き飛ばしてしまいます。逆に半角スペースが存在しなければ、空隙の調整は発生せず、行端がガタガタになってしまいます。

つまり和文では意味をなさないどころか、レイアウトを不安定化させてしまう要因になるのです。

 * base_font_color

文字色を指定します。

 * base_font_family

使用するフォントファミリを指定します。

 * base_font_size

基本文字サイズを指定します。

 * base_line_height_length

行の高さを直接指定します。文字サイズとは独立しているので、ページに行を詰め込んだり、逆にゆったり組んだりという工夫ができるようになっています。

 * base_line_height

行の高さを、文字サイズに対する倍数で指定します。先のbase_line_height_lengthとセットに指定する必要がありますが、互いに食い違っていてはいけません。どちらかは必ず数式で指定しましょう。

 * base_font_size_large

大きめの文字が使用する、文字サイズを指定します。

 * base_font_size_small

小さめの文字が使用する、文字サイズを指定します。

 * base_font_size_min

最小文字サイズを指定します。

 * base_font_style

字体を指定します。

以下、共通書式ブロックの設定例です。baseで字下げしているため、各設定項目ともbase_が省略されていることに注意してください。

[source, yaml]
----
base:
  # 左揃え
  align: left
  # 文字色は暗い灰色
  font_color: 333333
  # フォントファミリはNoto Serif
  font_family: Noto Serif
  # 基本文字サイズは10.5ポイント
  font_size: 10.5
  # 行の高さは18ポイント
  line_height_length: 18
  # 行高の文字サイズに対する倍数指定は数式で
  line_height: $base_line_height_length / $base_font_size
  # 大きめの文字サイズは基本文字サイズの1.25倍
  font_size_large: round($base_font_size * 1.25)
  # 小さめの文字サイズは基本文字サイズの0.85倍
  font_size_small: round($base_font_size * 0.85)
  # 最小文字サイズは基本文字サイズの0.75倍
  font_size_min: $base_font_size * 0.75
  # 標準字体を使う
  font_style: normal
  ...
----

==== 体裁の指定: 特殊書式設定

本節では、特殊書式を指定するブロック群について解説します。特殊書式には、リンク・書式設定済みテキスト（リテラル）・見出しなどがあります。

これらは全て各々の書式範囲において、共通書式指定を上書きするように作用します。順に見ていきましょう。

===== リンク

AsciiDocで作成された章や節、外部サイトへのリンクは、AsciiDoctor PDFによってハイパーリンクとしてPDF内に埋め込まれます。

この記述のために使用される体裁が、リンク用書式です。リンク用書式の指定は、linkブロックが対応します。linkブロックが指定する項目には、以下のものがあります。

 * link_font_color

リンク用文字色を指定します。

 * link_font_family

リンク用フォントファミリを指定します。

 * link_font_size

リンク用文字サイズを指定します。

 * link_font_style

リンク用字体を指定します。

以下は文字色のみを指定する、リンク用書式指定ブロックの例です。linkで字下げしているので、font_colorと表記するだけで十分であることに注意してください（<<sec-style-yaml-blocks>>を参照）。

[source, yaml]
----
link:
  # リンク文字色は青色
  font_color: #002FA7
----

===== リテラル

書式設定済みテキスト（リテラル）とはプログラムコードなど、「ありのまま」書き表したいテキストのことを指します。

ありのまま、とはタブ・スペース・特殊文字などが入っていてもフォーマッティングを行なわずにそのまま記載するという意味です。一般的にこのようなテキストの組版には、外観を損なわないように等幅系フォントファミリを使用するなどの配慮が行なわれます。

このために使用される体裁がリテラル用書式です。リテラル用書式指定ブロックはliteralが対応します。literalブロックで指定する項目には以下のものがあります。

 * literal_font_color

リテラル用文字色を指定します。

 * literal_font_family

リテラル用フォントファミリを指定します。

 * literal_font_size

リテラル用文字サイズを指定します。

 * literal_font_style

リテラル用字体を指定します。

以下は文字色を指定するリテラル用書式指定ブロックの例です。literalで字下げしているため、font_colorと書くだけで良くなっていることに注意してください。

[source, yaml]
----
literal:
  # リテラルは赤紫色
  font_color: b12146
----

===== 見出し

見出しは文書の構成要素です。見出しを効果的に使うことで文書の構造が際立ち、必要な情報が素早く届くようになります。AsciiDocの見出しは第1〜6レベルまであり、それぞれ重要度に従って使い分けられます。

見出しの体裁は、見出し書式指定ブロック（heading）で定義されます。見出し書式指定ブロックの指定項目は、見出し全体に共通した書式指定項目を含む部分（共通部分）と、見出しレベル1〜6に特化した書式指定項目を含む部分（特化部分）とで構成されます。特化部分で指定された書式は、該当する見出しレベルにおいて共通部分指定を上書きします。

共通部分に指定する設定項目は、以下のものがあります。

 * heading_font_color

見出し共通の文字色を指定します。

 * heading_font_family

見出し共通のフォントファミリを指定します。

 * heading_font_size

見出し共通の文字サイズを指定します。

 * heading_font_style

見出し共通の字体を指定します。

 * heading_line_height

見出し共通の行高を文字サイズの倍数で指定します。

 * heading_margin_top

見出し共通の上部マージンを指定します。先行する本文との間を取るために使用されます。

 * heading_margin_bottom

見出し共通の下部マージンを指定します。後続する本文との間を取るために使用されます。

また特化部分に指定する設定項目には、以下のものがあります。○には1〜6が入り、それぞれAsciiDocの見出しレベルの1〜6に対応します。

 * heading_h○_font_color

当該見出しレベルの文字色を指定します。

 * heading_h○_font_family

当該見出しレベルのフォントファミリを指定します。

 * heading_h○_font_size

当該見出しレベルの文字サイズを指定します。

 * heading_h○_font_style

当該見出しレベルの字体を指定します。

以下は見出し書式指定の例です。初めの共通部分では、文字関連のスタイル指定（色・フォントファミリ・文字太さ・文字サイズ）およびマージン指定を行なっています。続く特化部分では、第1〜第6の各見出しレベルについて、文字サイズを指定しています。headingで字下げしているので、各設定項目名ともheading_が省略されていることに注意してください。

[source, yaml]
----
heading:
  # 共通部分
  # 文字色は変更しない
  font_color: $base_font_color
  # フォントファミリも変更しない
  font_family: $base_font_family
  # 字体は太字
  font_style: bold
  # サイズは17pt
  font_size: 17
  # 行高はフォントサイズの1.2倍
  line_height: 1.2
  # 上マージンとして、行送り幅の0.2倍を確保
  margin_top: $vertical_rhythm * 0.2
  # 下マージンとして、行送り幅そのままを確保
  margin_bottom: $vertical_rhythm

  # 第1〜6レベルヘッダ特化部分
  h1_font_size: floor($base_font_size * 2.6)
  h2_font_size: floor($base_font_size * 2.6)
  h3_font_size: round($base_font_size * 2.15)
  h4_font_size: round($base_font_size * 1.6)
  h5_font_size: $base_font_size_large
  h6_font_size: $base_font_size
----

==== 表紙の指定
// TBD
表紙の体裁を指定するブロックは若干特殊です。表紙である以上、本文の代わりにロゴ・タイトル・サブタイトル・作者・版といった情報を分かりやすく目立つように記載する必要があるためです。分かりやすく目立つように記載するためには、自然と行ベースではなく自由に構成されてくるようになります。

表紙の体裁指定は、title_pageブロックによって行なわれます。title_pageブロックが指定する設定項目は、以下のものがあります。

 * title_page_align

表紙における字揃え方法を指定する項目です。次の値のうちのいずれかを取ります。

[format="csv", options="header"]
|===
設定値, 字揃え方法
left, 左
center, 中央
right, 右
justify, 両端
|===

両端揃えを指示するjustifyについては、よほど長いタイトルを付けない限り意味がないことに注意してください。

 * title_page_background_color

表紙の背景色を指定します。

 * title_page_background_image

表紙の背景に入れる画像を指定します。スタイルファイルからの相対パス、または絶対パスで指定します。

===== ロゴ画像

AsciiDoctorでは表紙にロゴ画像を配置できます。プロジェクトロゴなどが入った表紙は、そうでないものに比べると目を引きます。

title_pageブロックが指定する設定項目のうち、ロゴ画像に関連するものには以下のものがあります。

 * title_page_logo_align

ロゴ画像の配置方法を指定します。次の値のいずれかを取ります。

[format="csv", options="header"]
|===
設定値, 配置方法
left, 左寄せ
center, 中央寄せ
right, 右寄せ
|===

 * title_page_logo_image

ロゴ画像を指定します。スタイルファイルからの相対パス、または絶対パスで指定します。

 * title_page_logo_top

ロゴ画像の縦位置を、紙面上部からの絶対位置を指定します。単位として ```%``` を使用すると、紙面サイズに対しての割合で指定できます。

===== タイトル文・サブタイトル文

タイトル文とは文書の表題文です。サブタイトル文とは文書の副題文です。両者とも表紙にわかりやすく記載されます。

AsciiDoctorでは、タイトル文は第1レベル見出しとして記述されます。サブタイトル文は、タイトル文に「: 」を付けて記述されます。以下は例になります。

[source, asciidoc]
----
// タイトルは「武家諸法度」
// サブタイトルは「よりよい江戸の世に向けて」

= 武家諸法度: よりよい江戸の世に向けて
----

title_pageブロックが指定する設定項目のうち、タイトル文・サブタイトル文に関連するものには以下のものがあります。

 * title_page_title_top

タイトル文の縦位置を、紙面上部からの絶対位置で指定します。単位として ```%``` を使用すると紙面サイズに対しての割合で指定できます。

 * title_page_title_font_size

タイトル文の文字サイズを指定します。

 * title_page_title_font_color

タイトル文の文字色を指定します。

 * title_page_title_line_height

タイトル文の行高を指定します。

 * title_page_subtitle_font_size

サブタイトル文の文字サイズを指定します。

 * title_page_subtitle_font_style

サブタイトル文の字体を指定します。

 * title_page_subtitle_line_height

サブタイトル文の行高を指定します。

===== 作者・版

作者や版は重要な情報です。Asciidoctorではこれらの情報は表紙へ記載されます。

title_pageブロックが指定する設定項目のうち、作者情報や版に関連するものには以下のものがあります。

 * title_page_authors_margin_top

作者ブロックの上部マージンを指定します。間を取る意図で使用されます。

 * title_page_authors_font_size

作者ブロックの文字サイズを指定します。

 * title_page_authors_font_color

作者ブロックの文字色を指定します。

 * title_page_revision_margin_top

版ブロックの上部マージンを指定します。間を取る意図で使用されます。

以下は表紙体裁の指定例です。title_pageで字下げしていることから、各設定項目名ごとにtitle_page_が省略されていることに注意してください。logo・title・subtitle・authors・revisionについても同様です。

[source, yaml]
----
title_page:
  # 右揃え
  align: right
  # ロゴ
  logo:
    # ...紙面上部から10%の位置に
    top: 10%
  # タイトル文
  title:
    # ...紙面上部から55%; 中央より若干下気味に
    top: 55%
    # ...第1レベル見出しと同じ文字サイズに
    font_size: $heading_h1_font_size
    # ...灰色に
    font_color: 999999
    # ...行高は文字サイズの0.9倍に
    line_height: 0.9
  # サブタイトル文
  subtitle:
    # ...第3レベル見出しと同じ文字サイズに
    font_size: $heading_h3_font_size
    # ...ボールドイタリック体に
    font_style: bold_italic
    # ...行高は文字サイズと同じに
    line_height: 1
  # 作者ブロック
  authors:
    # ...1.25行分の上マージンを空けて
    margin_top: $base_font_size * 1.25
    # ...大きめ文字サイズに
    font_size: $base_font_size_large
    # ...暗めの灰色に
    font_color: 181818
  # 文書版ブロック
  revision:
    # ...1.25行分の上マージンを空けて
    margin_top: $base_font_size * 1.25
----

// TBD 柱でいいのか？
==== 柱の指定
最後に柱の内容を指定するブロックが来ます。柱の内容とは、ページヘッダ・ページフッタの各内容を指します。もちろんページの偶奇で別の内容を指定することができます。

ヘッダ・フッタ関連の設定項目には以下のものがあります。ヘッダ・フッタ間で設定がほぼ共通しているので、以下併記して解説します。

 * header_background_color, footer_background_color

背景色を指定します。

 * header_border_color, footer_border_color

区切り線色を指定します。

 * header_border_style, footer_border_style

区切り線スタイルを指定します。次の設定値のいずれかを取ります。

[format="csv", options="header"]
|===
設定値, 区切り線スタイル
solid, 実線
double, 二重実線
dashed, 破線
dotted, 点線
|===

 * header_border_width, footer_border_width

区切り線太さを指定します。

 * header_font_color, footer_font_color

文字色を指定します。

 * header_font_family, footer_font_family

フォントファミリを指定します。

 * header_font_size, footer_font_size

文字サイズを指定します。

 * header_font_style, footer_font_style

字体を指定します。

 * header_height, footer_height

高さを指定します。0にするとヘッダあるいはフッタ自体が出力されなくなります。

 * header_line_height, footer_line_height

行高を文字サイズの倍数で指定します。

 * header_padding, footer_padding

パディングを指定します。パディングとは内向きに計算される空隙です。大カッコで括って左・上・右・下と指定します。マージン同様、指定に単位を含められます。

 * header_image_vertical_align, footer_image_vertical_align

画像を含める時の、縦配置方法を指定します。以下の値のいずれかを取ります。

[format="csv", options="header"]
|===
設定値, 配置方法
top, 上寄せ
middle, 中央寄せ
bottom, 下寄せ
|===

また数値を指定すると、上端からの絶対指定と解釈されます。

 * header_vertical_align, footer_vertical_align

文の縦配置方法を指定します。以下の値のいずれかを取ります。

[format="csv", options="header"]
|===
設定値, 配置方法
top, 上寄せ
middle, 中央寄せ
bottom, 下寄せ
|===

===== ヘッダ・フッタ内容

ヘッダ・フッタ領域はまずページの偶（recto）・奇（verso）で分けられます。そしてそれぞれ左寄せ（left）・中央寄せ（center）・右寄せ（right）の3つの記載パターンがあります。これらを指定する設定項目は以下の6つです。

 * header_recto_content_left, footer_recto_content_left

偶数ページ、左寄せで記載する内容を指定します。

 * header_verso_content_left, footer_verso_content_left

奇数ページ、左寄せで記載する内容を指定します。

 * header_recto_content_center, footer_recto_content_center

偶数ページ、中央寄せで記載する内容を指定します。

 * header_verso_content_center, footer_verso_content_center

奇数ページ、中央寄せで記載する内容を指定します。

 * header_recto_content_right, footer_recto_content_right

偶数ページ、右寄せで記載する内容を指定します。

 * header_verso_content_right, footer_verso_content_right

奇数ページ、右寄せで記載する内容を指定します。

上の設定項目を適切に指定することで、好きな内容を出力させることができます。ページ番号を入れたい場合には ```{page-number}``` と入れておきましょう。 ```{...}``` という形式で記載された内容は、AsciiDoctorがアトリビュート（後述）として解釈し展開してくれます。ヘッダやフッタで良く使用されるアトリビュートには、次のものがあります。

[format="csv", options="header"]
|===
アトリビュート名, 意味
docdate, 執筆日
docname, 文書名
document-title, 文書タイトル
document-subtitle, 文書サブタイトル
chapter-title, 章タイトル
page-count, ページ数
page-number, ページ番号
release, 版数
revdate, 改訂日時
revnumber, 改訂番号
section-title, 節タイトル
section-or-chapter-title, 節または章タイトル
|===

以上長くなりましたが、設定例を見てみましょう。

[source, yaml]
----
header:
  # 高さは0.75インチに
  height: 0.75in
  # 行高は文字サイズと同じに
  line_height: 1
  # 偶数ページの場合
  recto_content:
    # ... 中央に「v《文書版》, 《執筆日》」と入れるように
    center: 'v{revnumber}, {docdate}'
  # 奇数ページの場合
  verso_content:
    # 偶数ページと同一に
    center: $header_recto_content

footer:
  # 文字サイズは小さめに
  font_size: $base_font_size_small
  # 文字色は本文そのままに
  font_color: $base_font_color
  # 区切り線の色は明るい灰色に
  border_color: dddddd
  # 区切り線の太さは0.25ポイント
  border_width: 0.25
  # 高さは0.75インチに
  height: 0.75in
  # 行高は文字サイズと同じに
  line_height: 1
  # 空隙を調整し (TBD)
  padding: [$base_line_height_length / 2, 1, 0, 1]
  # 上揃えに
  vertical_align: top
  # 偶数ページの場合
  recto_content:
    # ... 右寄せで「《節か章タイトル》 | 《ページ番号》」
    right: '{section-or-chapter-title} | {page-number}'
  # 奇数ページの場合
  verso_content:
    # ... 左寄せで「《ページ番号》 | 《章タイトル》」
    left: '{page-number} | {chapter-title}'
----

==== アトリビュート

さてこれまで見てきたように、スタイルファイルには体裁が記述されています。体裁をスタイルファイルにまとめたら、次はAsciiDoctorに使わせるために、新しく作ったスタイルファイルのパスを指定してやる必要があります。スタイルファイルのパスを指定するためには、アトリビュートを使用します。

アトリビュートとはAsciiDoctor自体が持つ設定値で、いわば環境変数のようなものです。スタイルファイルのパス指定を行なう際には、pdf-styleと呼ばれるアトリビュートをAsciiDoctor起動時に設定しておく必要があります。アトリビュートを起動時に設定するには、-aオプションを使用します。-aオプションを使用するためは、アトリビュート名とアトリビュート値を、=で結んだ形で指定してやります。以下はpdf-styleアトリビュートを指定する例です。

----
$ asciidoctor-pdf -a pdf-style=style.yml content.adoc
----

pdf-style以外にも、使用可能なアトリビュートは多数あります。中でも良く使われるものを以下にまとめました。ご自身でドキュメントを書かれる際には、ぜひ参考になさってください。

[format="csv", options="header"]
|===
アトリビュート名, 意味
author, 作者情報
citetitle, 引用ページタイトル
coderay-css, CodeRayハイライタに適用するCSSファイルパス
coderay-linenums-mode, CodeRayハイライタで行番号を出力する
date, 日付
description, 説明
docdate, 執筆日
docdatetime, 執筆日時
docdir, 文書ディレクトリ
docname, 文書名
doctime, 執筆時
doctitle, 文書タイトル
doctype, 文書タイプ
email, メールアドレス
encoding, 文字コード
filetype, ファイルタイプ
iconsdir, アイコンディレクトリ
imagesdir, 図表ディレクトリ
inception_year, 着想年
language, 言語
lines, ページ行数
numbered, ページ番号を出力する
notitle, タイトルを出力しない
outdir, 出力ディレクトリ
outfile, 出力ファイル名
pagewidth, ページ幅
pdf-fontsdir, PDF出力用フォントディレクトリ
pdf-page-size, PDFページサイズ
pdf-style, PDF出力用体裁ファイル
pdf-stylesdir, PDF出力用体裁ディレクトリ
preface-title, 前書きページタイトル
pygments-css, Pygmentsハイライタ用CSSファイルパス
pygments-linenums-mode, Pygmentsハイライタで行番号を出力する
source-highlighter, ソースコードハイライタの指定
source-language, ソースコードのデフォルト言語
toc, 目次を出力する
toc-class, 目次用体裁クラス
toc-placement, 目次用配置指定
toc-position, 目次用位置指定
toc-title, 目次ページタイトル
|===


********************************
コラム: アトリビュートは流動的

使用可能なアトリビュートについて、完全なリストはまだ存在しません。

AsciiDoctorの開発が活発なため、アトリビュートが流動的に変化しているためです。もしかするとpdf-styleについても、名前が変更されたりするかもしれません。そのときはGithubのAsciiDoctor PDFプロジェクトのドキュメントを参照すれば、いつでも最新の情報が載っています。

開発が活発な結果、仕様が流動的になってしまっていることは決して悪いことではありません。むしろ将来性があるということで大変歓迎すべきことです。筆者たちもAsciiDoctorコミュニティへ加わり、仕様の安定化に向けて働きかけやバグ報告などの協力を行なっています。いつか近い将来にアトリビュートも安定し、完全なリストが出てくることでしょう。

それまでは、本書のリストがきっと役に立つことと思います。
********************************

